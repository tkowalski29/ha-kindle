{# Tile card for generic entities #}
{% set domain = card.entity.split('.')[0] if card.entity else 'unknown' %}
{% set icon_map = {
    'light': {'on': 'ğŸ’¡', 'off': 'âš«'},
    'switch': {'on': 'ğŸ”˜', 'off': 'âšª'},
    'fan': {'on': 'ğŸŒ€', 'off': 'â­•'},
    'vacuum': {'on': 'ğŸ§¹', 'off': 'ğŸ§¹'},
    'lock': {'locked': 'ğŸ”’', 'unlocked': 'ğŸ”“'},
    'cover': {'open': 'ğŸ“‚', 'closed': 'ğŸ“'}
} %}
{% set icon = icon_map.get(domain, {}).get(card.state, 'â“') %}

<div class="card-tile entity-card {{ domain }} {% if card.state in ['on', 'unlocked', 'open', 'cleaning', 'docked'] %}active{% endif %}"
     data-grid-columns="{{ card.grid_options.columns if card.grid_options else 'default' }}">
    <div class="entity-icon">{{ icon }}</div>
    <div class="entity-info">
        <div class="entity-name">{{ card.friendly_name or card.name or card.entity }}</div>
        <div class="entity-state">{{ card.state }}</div>
    </div>
    {% if card.entity and domain in ['light', 'switch', 'fan'] %}
    <a href="/toggle/{{ dashboard_path }}/{{ card.entity }}" class="toggle-btn">{{ 'WYÅ' if card.state == 'on' else 'WÅ' }}</a>
    {% endif %}
</div>
