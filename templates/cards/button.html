{# Button card for actions #}
{% set domain = card.entity.split('.')[0] if card.entity else 'unknown' %}
{# Convert MDI icons to ASCII #}
{% if card.icon and 'mdi:' in card.icon %}
    {% set icon = '[>]' %}
{% else %}
    {% set icon = '[>]' %}
{% endif %}
{% set is_active = card.state in ['on', 'active', 'true'] %}

{% if card.entity %}
<a href="/toggle/{{ dashboard_path }}/{{ card.entity }}" style="text-decoration: none; color: inherit; display: block;">
{% endif %}
    <div class="card-button entity-card button {% if is_active %}active{% endif %}"
         data-grid-columns="{{ card.grid_options.columns if card.grid_options else 'default' }}"
         style="cursor: pointer;">
        <div class="entity-icon" style="font-weight: bold; font-family: monospace;">{{ icon }}</div>
        <div class="entity-info">
            <div class="entity-name">{{ card.friendly_name or card.name or card.entity }}</div>
            {% if card.show_state != false %}
            <div class="entity-state">{{ card.state }}</div>
            {% endif %}
        </div>
    </div>
{% if card.entity %}
</a>
{% endif %}
